<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>consul.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clojure-consul-client</span> <span class="project-version">0.1.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>consul</span></div></div></li><li class="depth-2 branch current"><a href="consul.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="consul.proto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>proto</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.acl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>acl</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.agent.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>agent</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.catalog.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>catalog</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.coordinate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coordinate</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.event.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>event</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.health.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>health</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.kv.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kv</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.operator.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>operator</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.prepared-query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prepared-query</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-3 branch"><a href="consul.proto.snapshot.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>snapshot</span></div></a></li><li class="depth-3"><a href="consul.proto.status.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>status</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="consul.core.html#var-cache-config"><div class="inner"><span>cache-config</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-catalog-registration"><div class="inner"><span>catalog-registration</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-check"><div class="inner"><span>check</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-client-configuration"><div class="inner"><span>client-configuration</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-consistency-mode"><div class="inner"><span>consistency-mode</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-consul"><div class="inner"><span>consul</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-host-and-port"><div class="inner"><span>host-and-port</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-operation"><div class="inner"><span>operation</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-query-options"><div class="inner"><span>query-options</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-reg-check"><div class="inner"><span>reg-check</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-registration"><div class="inner"><span>registration</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-tagged-addresses"><div class="inner"><span>tagged-addresses</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-transaction-options"><div class="inner"><span>transaction-options</span></div></a></li><li class="depth-1"><a href="consul.core.html#var-write-request"><div class="inner"><span>write-request</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">consul.core</h1><div class="doc"><pre class="plaintext">Core consul constructor functions.
</pre></div><div class="public anchor" id="var-cache-config"><h3>cache-config</h3><div class="usage"><code>(cache-config &amp; args)</code></div><div class="doc"><pre class="plaintext">Create a com.orbitz.consul.config.CacheConfig.

If the sole argument is a CacheConfig, return that argument.

Otherwise, build a CacheConfig based on keyword keys:

* :back-off-delay  A sequence of the [min-delay max-delay], or a single [delay] value. Values are duration specs.
* :min-delay-between-requests The min delay between requests. A duration spec.
* :timeout-auto-adjusted A boolean.
* :timeout-auto-adjustment-margin The timeout adjustment margin. A duration spec.
* :refresh-error-logged-as-warning A boolean.
* :refresh-error-logged-as-error A boolean.
* :refresh-error-logged-as A com.orbitz.conul.config.CacheConfig$RefreshErrorLogConsumer instance.

All duration specs can either be a long (milliseconds), a float (seconds), a pair of [long java.util.concurrent.TimeUnit],
a java.time.Duration, or a string to parse with java.time.Duration/parse.</pre></div></div><div class="public anchor" id="var-catalog-registration"><h3>catalog-registration</h3><div class="usage"><code>(catalog-registration &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.orbitz.consul.model.catalog.CatalogRegistration.

The arguments may be a single CatalogRegistration instance</pre></div></div><div class="public anchor" id="var-check"><h3>check</h3><div class="usage"><code>(check &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.orbitz.consul.model.agent.Check.

The arguments may be a single Check instanec, or keyword arguments:

* :id          The check ID string.
* :name        The check name string.
* :notes       The check notes string.
* :output      The check output string.
* :script      The check script string.
* :interval    The check interval duration string.
* :ttl         The check TTL duration string.
* :http        The HTTP check string.
* :tcp         The TCP check string.
* :grpc        The gRPC check string.
* :grpc-use-tls? A boolean, whether to use TLS for gRPC checks.
* :service-id  The service ID string.
* :service-tags A sequence of service tag strings.
* :deregister-critical-service-after A duration string.</pre></div></div><div class="public anchor" id="var-client-configuration"><h3>client-configuration</h3><div class="usage"><code>(client-configuration &amp; args)</code></div><div class="doc"><pre class="plaintext">Create a com.orbitz.consul.config.ClientConfig.

If the sole argument is a ClientConfig, return that argument.

Otherwise, build a ClientConfig based on keyword keys:

* :cache-config The cache config. See consul.core/cache-config.</pre></div></div><div class="public anchor" id="var-consistency-mode"><h3>consistency-mode</h3><div class="usage"><code>(consistency-mode v)</code></div><div class="doc"><pre class="plaintext">Coerce the argument to a com.orbitz.consul.option.ConsistencyMode.
</pre></div></div><div class="public anchor" id="var-consul"><h3>consul</h3><div class="usage"><code>(consul &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a consul client.

Passing in an instance of com.orbitz.consul.Consul as the only argument
returns that argument.

Otherwise, a new consul client is constructed based on keyword arguments:

* :url            A java.net.URL, the consul agent URL to use.
* :ping           A boolean, whether or not to ping the server first.
* :basic-auth     Basic authentication credentials. This can be a map with keys
                  :username and :password, or a sequence [username, password].
* :acl-token      An ACL token string.
* :headers        A map of string-&gt;string, headers to add to requests.
* :consul-bookend A com.orbitz.consul.util.bookend.ConsulBookend instance.
* :host-and-port  A map of keys (:host, :port), or a string "host:port",
                  or a com.google.common.net.HostAndPort instance. The host
                  and port to connect to the consul agent.
* :ssl-context    A javax.net.ssl.SSLContext instance.
* :trust-manager  A javax.net.ssl.X509TrustManager instance.
* :hostname-verifier A javax.net.ssl.HostnameVerifier instance.
* :proxy          A java.net.Proxy instance.
* :connect-timeout The connect timeout; this can be a long (milliseconds),
                   a float (seconds), a pair of [long, java.util.concurrent.TimeUnit],
                   a java.time.Duration, or a string (parsed via Duration.parse). The
                   minimum granularity is milliseconds.
* :read-timeout   The read timeout; see connect-timeout.
* :write-timeout  The write timeout; see connect-timeout.
* :executor-service A java.util.concurrent.ExecutorService instance.
* :client-configuration A com.orbitz.consul.config.ClientConfig instance, or a map
                        that specs out fields of that class. See consul.core/client-configuration.
* :client-event-callback A com.orbitz.consul.monitoring.ClientEventCallback instance.</pre></div></div><div class="public anchor" id="var-host-and-port"><h3>host-and-port</h3><div class="usage"><code>(host-and-port &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.google.common.net.HostAndPort.

Arguments may be any of:

* A HostAndPort instance.
* A single host string, or a host:port string.
* A host string, and a port number.
* A map with keys :host and optionally :port.</pre></div></div><div class="public anchor" id="var-operation"><h3>operation</h3><div class="usage"><code>(operation &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.orbitz.consul.model.kv.Operation.

If passed a single Operation argument, return that argument.
Otherwise interpret the keyword arguments:

* :verb       The verb string.
* :key        The key string.
* :value      The value string.
* :flags      A long bitset of flags.
* :index      The BigInteger index value.
* :session    The session string.</pre></div></div><div class="public anchor" id="var-query-options"><h3>query-options</h3><div class="usage"><code>(query-options &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.orbitz.consul.option.QueryOptions.

The argument may be a QueryOptions instance, or keyword keys:

* :wait        The wait duration string (e.g. 1m, 30s).
* :token       The token string.
* :index       A BigInteger index.
* :near        The near string.
* :datacenter  The datacenter string.
* :node-meta   The node metadata map.
* :tags        The list of service tags.
* :consistency-mode A string, keyword, or ConsistencyMode value.</pre></div></div><div class="public anchor" id="var-reg-check"><h3>reg-check</h3><div class="usage"><code>(reg-check &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.orbitz.consul.model.agent.Registration$RegCheck.

The argument may be an instance of RegCheck, or keyword arguments:

* :script      The script check string.
* :interval    The check interval duration string.
* :ttl         The TTL duration string.
* :http        The HTTP check string.
* :tcp         The TCP check string.
* :grpc        The gRPC check string.
* :grpc-use-tls? A boolean, whether to use TLS for gRPC checks.
* :timeout     The timeout duration string.
* :notes       The notes string.
* :deregister-critical-services-after A duration string to deregister critical services after.
* :tls-skip-verify A boolean, whether to skip verification for TLS checks.
* :status      A status string.</pre></div></div><div class="public anchor" id="var-registration"><h3>registration</h3><div class="usage"><code>(registration &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.orbitz.consul.model.agent.Registration.

The argument may be an instance of Registration, or keyword arguments.

* :name        The service name string.
* :id          The optional service ID string.
* :address     The service address.
* :port        The service port.
* :checks      A sequence of checks; each element may be a RegCheck instance, or
               a map containing keys as described in consul.core/reg-check.
* :tags        A sequence of tag strings.
* :meta        A map of metadata (string-&gt;string).
* :enable-tag-override A boolean.</pre></div></div><div class="public anchor" id="var-tagged-addresses"><h3>tagged-addresses</h3><div class="usage"><code>(tagged-addresses &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.orbitz.consul.model.catalog.TaggedAddresses.

The arguments may be a TaggedAddresses instance, or keyword arguments:

* :lan   The LAN address string.
* :wan   The WAN address string.</pre></div></div><div class="public anchor" id="var-transaction-options"><h3>transaction-options</h3><div class="usage"><code>(transaction-options &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.orbitz.consul.option.TransactionOptions.

If passed a single TransactionOptions argument, return that argument.
Otherwise interpret the keyword arguments:

* :datacenter       The datacenter string.
* :consistency-mode A ConsistencyMode instance, or a string consistency mode to parse.</pre></div></div><div class="public anchor" id="var-write-request"><h3>write-request</h3><div class="usage"><code>(write-request &amp; args)</code></div><div class="doc"><pre class="plaintext">Construct a com.orbitz.consul.model.catalog.WriteRequest.

The arguments may be a single WriteRequest instance, or keyword keys:

* :token       The write request token string.</pre></div></div></div></body></html>